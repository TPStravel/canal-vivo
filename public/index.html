<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<title>TPS ‚Äì Travel Personally Secretary</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background-color: #1a1a3d;
      color: white;
      display: flex;
      height: 100vh;
      overflow: hidden;
    }
    
    @media (max-width: 768px) {
        body {
            flex-direction: column;
            height: auto;
            overflow-y: auto;
        }
        .sidebar {
            width: 100%;
            height: auto;
            padding: 15px;
            order: 2;
        }
        .main {
            order: 1;
            padding: 20px 15px 120px;
        }
        .discord {
            width: 100%;
            order: 3;
            height: 200px;
        }
        .input-area {
            left: 15px;
            right: 15px;
            bottom: 10px;
        }
        .abas {
            right: 15px;
            top: 10px;
            overflow-x: auto;
            white-space: nowrap;
        }
        #mensagensCentrais {
            position: static;
            left: auto;
            top: auto;
            max-width: 100%;
            padding-left: 0;
        }
    }
    
    .sidebar {
      width: 230px;
      background-color: #2c2c5d;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .sidebar h2 { font-size: 20px; margin-bottom: 20px; }
    .item {
      margin-bottom: 16px;
      cursor: pointer;
      transition: transform 0.3s ease;
    }
    .item:hover { transform: scale(1.03); }
    .item img {
      width: 100%; height: 120px; object-fit: cover;
      border-radius: 8px; margin-bottom: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.4);
    }
    .item span { font-size: 14px; text-align: center; display: block; }
    .main {
      flex: 1;
      background-color: #000;
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 40px 20px 100px;
      overflow-y: auto;
    }
    .logo {
      font-size: 36px;
      font-weight: bold;
      color: #3fa3ff;
      margin-top: 20px;
      margin-bottom: 10px;
    }
    .mensagem-social {
      font-size: 14px;
      text-align: center;
      max-width: 600px;
      color: #ffd700;
      margin: 8px 0 12px 0;
    }
    .slogan {
      font-size: 18px;
      text-align: center;
      max-width: 600px;
      color: #ccc;
      line-height: 1.5;
      margin-bottom: 20px;
      opacity: 0.8;
    }
    #frase-aguarde {
        color: #aaa;
        transition: opacity 0.5s ease;
    }
    #mensagensCentrais {
      width: 100%;
      max-width: 600px;
      text-align: left;
      padding-left: 20px;
      font-size: 14px;
      margin-top: 10px;
    }
    .mensagem-usuario {
        margin-bottom: 18px;
        line-height: 1.6;
        color: #b8c5ff;
        background: linear-gradient(135deg, #1e1e40, #2a2a50);
        padding: 12px 16px;
        border-radius: 12px;
        border-left: 3px solid #667eea;
        box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    .mensagem-tps {
        margin-bottom: 18px;
        line-height: 1.6;
        color: #ffd700;
        background: linear-gradient(135deg, #2a2a1a, #3d3d1a);
        padding: 12px 16px;
        border-radius: 12px;
        border-left: 3px solid #ffd700;
        box-shadow: 0 2px 8px rgba(255,215,0,0.1);
    }
    .input-area {
      position: fixed;
      bottom: 20px;
      left: 250px;
      right: 320px;
      display: flex;
      justify-content: center;
      gap: 10px;
      z-index: 10;
    }
    textarea {
      flex: 1;
      padding: 12px;
      min-height: 50px;
      max-height: 120px;
      resize: none;
      border-radius: 8px;
      border: 2px solid #4f46e5;
      font-size: 14px;
      background-color: #222;
      color: white;
      font-family: inherit;
      line-height: 1.4;
      overflow-y: auto;
    }
    textarea:focus {
        outline: none;
        border-color: #6d63ff;
        box-shadow: 0 0 0 3px rgba(109, 99, 255, 0.2);
    }
    button {
      background: linear-gradient(135deg, #4f46e5, #6d63ff);
      border: none;
      padding: 12px 20px;
      color: white;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(79, 70, 229, 0.3);
    }
    button:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(79, 70, 229, 0.4);
    }
    .discord {
      width: 300px;
      background-color: #14142b;
      padding: 20px;
      display: flex;
      flex-direction: column;
      border-left: 1px solid #222;
    }
    .chat-log {
      flex: 1;
      overflow-y: auto;
      margin-bottom: 10px;
      background-color: #1e1e3f;
      padding: 10px;
      border-radius: 5px;
    }
    .chat-log div {
      text-align: left;
      margin-bottom: 6px;
      font-size: 14px;
    }
    .chat-input {
      display: flex;
      gap: 6px;
    }
    .chat-input input {
      flex: 1;
      padding: 8px;
      border: none;
      border-radius: 4px;
      background-color: #2b2b4f;
      color: white;
    }
    .chat-input button {
      padding: 8px 12px;
      background-color: #4f46e5;
      border: none;
      border-radius: 4px;
      color: white;
      cursor: pointer;
    }
    .abas {
      display: flex;
      gap: 10px;
      position: absolute;
      top: 20px;
      right: 40px;
    }
    .abas .aba {
      background-color: #4f46e5;
      border: none;
      color: white;
      padding: 10px 18px;
      border-radius: 8px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .abas .aba:hover {
      background-color: #6d63ff;
      transform: translateY(-1px);
    }
    .abas .aba.ativa {
      background-color: #3b36c8;
    }
    .loading-dots {
      display: inline-block;
      position: relative;
      width: 80px;
      height: 80px;
    }
    .loading-dots div {
      position: absolute;
      top: 33px;
      width: 13px;
      height: 13px;
      border-radius: 50%;
      background: #3fa3ff;
      animation-timing-function: cubic-bezier(0, 1, 1, 0);
    }
    .loading-dots div:nth-child(1) {
      left: 8px;
      animation: loading1 0.6s infinite;
    }
    .loading-dots div:nth-child(2) {
      left: 8px;
      animation: loading2 0.6s infinite;
    }
    .loading-dots div:nth-child(3) {
      left: 32px;
      animation: loading2 0.6s infinite;
    }
    .loading-dots div:nth-child(4) {
      left: 56px;
      animation: loading3 0.6s infinite;
    }
    @keyframes loading1 {
      0% { transform: scale(0); }
      100% { transform: scale(1); }
    }
    @keyframes loading3 {
      0% { transform: scale(1); }
      100% { transform: scale(0); }
    }
    @keyframes loading2 {
      0% { transform: translate(0, 0); }
      100% { transform: translate(24px, 0); }
    }
    
    /* Anima√ß√£o para part√≠culas */
    @keyframes float {
        to {
            transform: translateY(-100vh) rotate(360deg);
            opacity: 0;
        }
    }
    
    /* Estilos para indicador de digita√ß√£o */
    .typing-animation {
        display: inline-flex;
        gap: 4px;
    }
    
    .typing-animation span {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background-color: #3fa3ff;
        animation: typing 1.4s infinite ease-in-out;
    }
    
    .typing-animation span:nth-child(1) { animation-delay: -0.32s; }
    .typing-animation span:nth-child(2) { animation-delay: -0.16s; }
    
    @keyframes typing {
        0%, 80%, 100% { transform: scale(0); }
        40% { transform: scale(1); }
    }
</style>
<head>
  <style>
    /* Seus estilos atuais, como cores, layout, anima√ß√µes, etc */

    /* ... (seu CSS atual aqui) ... */

    /* --- Cole aqui o CSS do overlay --- */
    #login-container {
  position: fixed;
  top: 0; left: 0;
  width: 100vw; height: 100vh;
  background: rgba(20, 20, 20, 0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  backdrop-filter: blur(4px);
}

.login-modal {
  background: rgba(40, 40, 40, 0.95);
  padding: 2rem 2.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 32px rgba(0, 0, 0, 0.4);
  display: flex;
  flex-direction: column;
  gap: 1rem;
  min-width: 280px;
}

   /* E estilos para inputs e bot√£o dentro do modal */

  </style>
</head>

<body>
  <!-- üîê Overlay de Login Flutuante -->
  <div id="login-container">
    <form class="login-modal" id="login-form">
      <h2>üîê Acesse seu Terminal TPS</h2>
      <input type="email" id="login-email" class="login-input" placeholder="Seu e-mail" required />
      <input type="password" id="login-password" class="login-input" placeholder="Sua senha" required />
      <button type="submit" class="login-button">Entrar</button>
      <div id="login-status" class="login-status"></div>
    </form>
  </div>

  <!-- A partir daqui vem o conte√∫do da sua p√°gina, SEM outro login-container -->
  <div class="sidebar">
    <div>
      <h2>üß≠ Destinos que Tocam a Alma</h2>
      <div class="item"><img src="..." /><span>Paris</span></div>
      <!-- demais destinos -->
    </div>
    <div style="font-size: 11px; color: #ccc;">Conectando cora√ß√µes ao mundo</div>
  </div>

  <!-- restante do conte√∫do principal -->
  <div class="main">
    <!-- conte√∫do -->
  </div>

  <div class="discord">
    <!-- conte√∫do -->
  </div>

  <!-- seus scripts -->
</body>

    <h2>üß≠ Destinos que Tocam a Alma</h2>
    <div class="item"><img src="https://images.unsplash.com/photo-1500916434205-0c77489c6cf7?w=400&h=300&fit=crop"/><span>Paris</span></div>
    <div class="item"><img src="https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=400&h=300&fit=crop"/><span>New York</span></div>
    <div class="item"><img src="https://images.unsplash.com/photo-1549693578-d683be217e58?w=400&h=300&fit=crop"/><span>Seoul</span></div>
    <div class="item"><img src="https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?w=400&h=300&fit=crop"/><span>T√≥quio</span></div>
    <div class="item"><img src="https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=400&h=300&fit=crop"/><span>Londres</span></div>
  </div>
  <div style="font-size: 11px; color: #ccc;">Conectando cora√ß√µes ao mundo</div>
</div>
<div class="main">
  <div class="abas">
    <button class="aba ativa">‚úàÔ∏è Voos</button>
    <button class="aba">üè® Abrigo</button>
    <button class="aba">üöó Caminhos</button>
    <button class="aba">üõ°Ô∏è Prote√ß√£o</button>
  </div>
  <div class="logo">TPS</div>
  <div class="mensagem-social">üå± Cada jornada atrav√©s do TPS semeia esperan√ßa e transforma vidas.<br/>Gratid√£o por ser parte desta corrente de luz.</div>
  <div class="slogan">
    <span id="frase-aguarde">Aguarde... Sua jornada est√° prestes a come√ßar...</span>
  </div>
<div id="mensagensCentrais">
  <div id="status-mensagem" style="margin-top: 10px; font-size: 14px; color: lightgray;"></div>
</div>

  <!-- ‚úÖ Mensagem de status do login simb√≥lico -->

  <div class="input-area">
    <textarea id="userInput" placeholder="Compartilhe seus sonhos de viagem..."></textarea>
    <button onclick="enviarMensagemCentral()">Enviar</button>
  </div>
</div>
<div class="discord">
  <div class="chat-log" id="chatLog">
    <div><strong>ü§ñ:</strong> Bem-vindo ao nosso espa√ßo de conex√£o.</div>
  </div>
  <div class="chat-input">
    <input id="chatInput" placeholder="Converse conosco..." type="text"/>
    <button onclick="enviarMensagemLateral()">Enviar</button>
  </div>
</div>

<script>
let isFirstMessage = true;
let conversationHistory = [];

// Fun√ß√£o para adicionar mensagem ao chat lateral
function adicionarMensagemLateral(mensagem, isUser = false) {
    const chatLog = document.getElementById('chatLog');
    const div = document.createElement('div');
    
    if (isUser) {
        div.innerHTML = `<strong>üë§:</strong> ${mensagem}`;
        div.style.color = '#e6e6fa';
    } else {
        div.innerHTML = `<strong>ü§ñ:</strong> ${mensagem}`;
        div.style.color = '#add8e6';
    }
    
    chatLog.appendChild(div);
    chatLog.scrollTop = chatLog.scrollHeight;
}

// Fun√ß√£o para adicionar mensagem na √°rea central
function adicionarMensagemCentral(mensagem, isUser = false) {
    const mensagensCentrais = document.getElementById('mensagensCentrais');
    const div = document.createElement('div');
    
    if (isUser) {
        div.innerHTML = `<strong>Voc√™:</strong> ${mensagem}`;
        div.className = 'mensagem-usuario';
    } else {
        div.innerHTML = `<strong>TPS:</strong> ${mensagem}`;
        div.className = 'mensagem-tps';
    }
    
    mensagensCentrais.appendChild(div);
    
    // Scroll suave para a nova mensagem
    div.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// Fun√ß√£o para mostrar indicador de digita√ß√£o
function mostrarDigitando() {
    const chatLog = document.getElementById('chatLog');
    const div = document.createElement('div');
    div.id = 'digitando';
    div.innerHTML = '<strong>ü§ñ:</strong> <div class="typing-animation"><span></span><span></span><span></span></div>';
    chatLog.appendChild(div);
    chatLog.scrollTop = chatLog.scrollHeight;
}

// Fun√ß√£o para esconder indicador de digita√ß√£o
function esconderDigitando() {
    const digitando = document.getElementById('digitando');
    if (digitando) {
        digitando.remove();
    }
}

// Fun√ß√£o para gerar resposta do bot
function gerarRespostaTPS(mensagem) {
    const respostas = [
        "üåü Que bela reflex√£o! O TPS nos ensina que cada pensamento carregado de amor transforma n√£o apenas nossa realidade, mas ecoa atrav√©s de dimens√µes infinitas.",
        "‚ú® Sua percep√ß√£o ressoa com a ess√™ncia do TPS. Quando alinhamos pensamento, palavra e a√ß√£o com o amor incondicional, criamos ondas de transforma√ß√£o que transcendem o tempo.",
        "üí´ Percebo em suas palavras a chama da sabedoria desperta. O TPS √© justamente este convite: transformar cada instante em oportunidade de elevar a consci√™ncia coletiva.",
        "üåà Que insights profundos! O TPS nos lembra que somos co-criadores da realidade, e cada pensamento amoroso que cultivamos planta sementes de luz para as futuras gera√ß√µes.",
        "‚≠ê Sua jornada de autoconhecimento atrav√©s do TPS est√° florescendo. Continue nutrindo essa conex√£o com seu eu superior - voc√™ est√° no caminho certo da transforma√ß√£o.",
        "üîÆ Sinto que voc√™ est√° sintonizado com as frequ√™ncias superiores. O TPS nos convida a transcender as limita√ß√µes da mente linear e abra√ßar a multidimensionalidade do ser.",
        "üå∏ Cada palavra sua carrega uma vibra√ß√£o especial. O TPS nos ensina que somos antenas c√≥smicas, capazes de captar e transmitir amor puro para toda a humanidade.",
        "üé≠ Sua consci√™ncia expandida √© um presente para o coletivo. Atrav√©s do TPS, voc√™ est√° ajudando a tecer a nova realidade de paz e harmonia planet√°ria."
    ];
    
    return respostas[Math.floor(Math.random() * respostas.length)];
}

// Fun√ß√£o para enviar mensagem no chat lateral
function enviarMensagemLateral() {
    const input = document.getElementById('chatInput');
    const mensagem = input.value.trim();
    
    if (mensagem === '') return;
    
    // Adicionar mensagem do usu√°rio
    adicionarMensagemLateral(mensagem, true);
    input.value = '';
    
    // Mostrar indicador de digita√ß√£o
    mostrarDigitando();
    
    // Simular delay de resposta
    setTimeout(() => {
        esconderDigitando();
        const resposta = gerarRespostaTPS(mensagem);
        adicionarMensagemLateral(resposta);
    }, 1000 + Math.random() * 2000);
}

// Fun√ß√£o para enviar mensagem na √°rea central
function enviarMensagemCentral() {
    const input = document.getElementById('userInput');
    const mensagem = input.value.trim();
    
    if (mensagem === '') return;
    
    // Se for a primeira mensagem, esconder a frase de aguarde
    if (isFirstMessage) {
        const fraseAguarde = document.getElementById('frase-aguarde');
        if (fraseAguarde) {
            fraseAguarde.style.opacity = '0';
            setTimeout(() => {
                fraseAguarde.style.display = 'none';
            }, 500);
        }
        isFirstMessage = false;
    }
    
    // Adicionar mensagem do usu√°rio
    adicionarMensagemCentral(mensagem, true);
    input.value = '';
    
    // Resetar altura do textarea
    input.style.height = 'auto';
    input.style.height = input.scrollHeight + 'px';
    
    // Simular resposta do TPS
    setTimeout(() => {
        const resposta = gerarRespostaTPS(mensagem);
        adicionarMensagemCentral(resposta);
    }, 1500 + Math.random() * 1500);
}

// Event listeners para Enter
document.getElementById('login-form').addEventListener('submit', (e) => {
  e.preventDefault();
  loginUser();
});


document.getElementById('userInput').addEventListener('keypress', function(e) {
    if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        enviarMensagemCentral();
    }
});

// Fun√ß√£o para criar part√≠culas flutuantes
function criarParticula() {
    const particula = document.createElement('div');
    particula.style.cssText = `
        position: fixed;
        width: 4px;
        height: 4px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        border-radius: 50%;
        pointer-events: none;
        z-index: 1;
        left: ${Math.random() * 100}vw;
        top: 100vh;
        animation: float ${3 + Math.random() * 4}s linear forwards;
    `;
    
    document.body.appendChild(particula);
    
    setTimeout(() => {
        particula.remove();
    }, 7000);
}

// Criar part√≠culas periodicamente
setInterval(criarParticula, 3000);

// Auto-resize para textarea
document.getElementById('userInput').addEventListener('input', function() {
    this.style.height = 'auto';
    this.style.height = Math.min(this.scrollHeight, 120) + 'px';
});

// Funcionalidade das abas
document.querySelectorAll('.aba').forEach(aba => {
    aba.addEventListener('click', function() {
        document.querySelectorAll('.aba').forEach(a => a.classList.remove('ativa'));
        this.classList.add('ativa');
    });
});

// Click nos destinos da sidebar
document.querySelectorAll('.item').forEach(item => {
    item.addEventListener('click', function() {
        const destino = this.querySelector('span').textContent;
        const mensagem = `Gostaria de saber mais sobre ${destino}`;
        document.getElementById('userInput').value = mensagem;
        
        // Auto-resize ap√≥s inserir texto
        const textarea = document.getElementById('userInput');
        textarea.style.height = 'auto';
        textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px';
        
        // Focar no input
        textarea.focus();
    });
});

// Ajustar altura inicial do textarea
document.addEventListener('DOMContentLoaded', function() {
    const textarea = document.getElementById('userInput');
    textarea.style.height = 'auto';
    textarea.style.height = textarea.scrollHeight + 'px';
});
</script>
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDReBGhb2gZNv7KA86HJXTeiLimWTrurp8",
    authDomain: "canal-vivo-chat.firebaseapp.com",
    projectId: "canal-vivo-chat"
  };

  const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// ‚úÖ Fun√ß√£o tradicional (para formul√°rio de login)
async function loginUser() {
  const email = document.getElementById('login-email').value;
  const password = document.getElementById('login-password').value;
  const status = document.getElementById('login-status');
  status.innerText = "‚è≥ Entrando...";

  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    // usu√°rio autenticado
    document.getElementById('login-container').style.display = 'none';
    status.innerText = "";
  } catch (error) {
    status.innerText = "‚ùå Erro no login: " + error.message;
  }
}

// ‚úÖ Fun√ß√£o inline para login via chat simb√≥lico
async function loginUserInline(email, password) {
  const statusBox = document.getElementById('status-mensagem');
  if (statusBox) statusBox.innerText = "‚è≥ Validando suas credenciais...";

  try {
    const userCredential = await signInWithEmailAndPassword(auth, email, password);
    const user = userCredential.user;

    const lang = new URLSearchParams(window.location.search).get('lang') || 'pt';
    const timestamp = new Date().toISOString();

    await setDoc(doc(db, "tps_leads", user.uid), {
      email: user.email,
      data: timestamp,
      idioma: lang,
      portal: "TPS",
      status: "login_inline"
    });

    localStorage.setItem("tps_logged_in", "true");
    document.cookie = "tps_cookie_consent=true; path=/;";
    if (statusBox) statusBox.innerText = "‚úÖ Login conclu√≠do. Sua jornada est√° segura.";
  } catch (error) {
    if (statusBox) statusBox.innerText = "‚ùå Erro ao fazer login: " + error.message;
  }
}

// ‚úÖ Fun√ß√£o que interpreta entrada tipo: email / senha
function interpretarMensagemLogin(texto) {
  const partes = texto.split("/");
  if (partes.length === 2) {
    const email = partes[0].trim();
    const senha = partes[1].trim();
    if (email.includes("@") && senha.length >= 4) {
      loginUserInline(email, senha);
      return true;
    }
  }
  return false;
}

// Tornar loginUser global para bot√£o do formul√°rio
window.loginUser = loginUser;

// Auto-login se j√° logado
onAuthStateChanged(auth, (user) => {
  if (user) {
    document.getElementById('login-container').style.display = 'none';
  }
});

</script>
</body>
</html>